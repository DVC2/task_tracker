{
  "commands": [
    {"name": "task.list", "command": "tt list", "description": "List all tasks"},
    {"name": "task.list_todo", "command": "tt list todo", "description": "List only TO-DO tasks"},
    {"name": "task.list_in_progress", "command": "tt list in-progress", "description": "List tasks in progress"},
    {"name": "task.view", "command": "tt view %s", "description": "View details of a specific task by ID"},
    {"name": "task.add", "command": "tt add", "description": "Add a new task interactively"},
    {"name": "task.quick", "command": "tt quick \"%s\" %s", "description": "Quickly add a task with title and category"},
    {"name": "task.update_status", "command": "tt update %s status %s", "description": "Update task status (task_id, new_status)"},
    {"name": "task.add_file", "command": "tt update %s add-file %s", "description": "Link a file to a task (task_id, file_path)"},
    {"name": "task.comment", "command": "tt update %s comment \"%s\"", "description": "Add a comment to a task (task_id, comment)"},
    {"name": "task.changes", "command": "tt changes", "description": "Show recent file changes"},
    {"name": "task.ai_context", "command": "tt ai-context", "description": "Generate AI-friendly context from tasks"},
    {"name": "task.stats", "command": "tt stats", "description": "Show task statistics"}
  ],
  "rules": [
    {
      "description": "Create task related to file you're editing",
      "match": {
        "trigger": "create task",
        "patterns": [
          "create task",
          "add task",
          "new task"
        ]
      },
      "actions": [
        {
          "type": "suggest_command",
          "command": "task.quick",
          "args": [
            "$ASK:Task title?",
            "$ASK:Category? (feature|bugfix|refactor|docs|chore)"
          ]
        }
      ]
    },
    {
      "description": "Link current file to task",
      "match": {
        "trigger": "link task",
        "patterns": [
          "link (to|with) task",
          "associate (with|to) task",
          "connect to task"
        ]
      },
      "actions": [
        {
          "type": "suggest_command",
          "command": "task.add_file",
          "args": [
            "$ASK:Task ID?",
            "$CURSOR_FILE"
          ]
        }
      ]
    },
    {
      "description": "View task details",
      "match": {
        "trigger": "view task",
        "patterns": [
          "show task",
          "view task",
          "task details"
        ]
      },
      "actions": [
        {
          "type": "suggest_command",
          "command": "task.view",
          "args": [
            "$ASK:Task ID?"
          ]
        }
      ]
    }
  ]
}
